{"version":3,"sources":["../src/index.ts","../src/json-logic-operators/dateAddDays.ts","../src/json-logic-operators/dateDifferenceInMonths.ts","../src/json-logic-operators/index.ts"],"sourcesContent":["import {\n  createHeadlessForm as createHeadlessFormNext,\n  type CreateHeadlessFormOptions,\n  modify as modifyNext,\n} from '@remoteoss/json-schema-form'\nimport {\n  createHeadlessForm as createHeadlessFormV0,\n  modify as modifyV0,\n} from '@remoteoss/json-schema-form-v0-deprecated'\nimport { operators } from './json-logic-operators'\n\ntype FormSchemaNext = Parameters<typeof createHeadlessFormNext>[0]\ntype FormSchemaLegacy = Parameters<typeof createHeadlessFormV0>[0]\ntype FormSchema = FormSchemaNext | FormSchemaLegacy\n\ninterface JsfOptions extends CreateHeadlessFormOptions {\n  nextVersion?: boolean\n  [key: string]: any\n}\n\nexport function createHeadlessForm(formSchema: FormSchema, jsfOptions: JsfOptions = {}) {\n  const { nextVersion: configNextVersion = false, initialValues, strictInputType } = jsfOptions\n\n  const schemaJsfVersion = formSchema?.schema?.['x-rmt-meta']?.jsfVersion\n\n  const nextVersion = schemaJsfVersion === '1' || configNextVersion\n\n  if (nextVersion) {\n    return createHeadlessFormNext(formSchema as FormSchemaNext, {\n      initialValues,\n      strictInputType,\n      legacyOptions: { treatNullAsUndefined: true, allowForbiddenValues: true },\n      customJsonLogicOps: operators,\n      ...jsfOptions,\n    })\n  }\n\n  return createHeadlessFormV0(formSchema as FormSchemaLegacy, {\n    initialValues,\n    strictInputType,\n    ...jsfOptions,\n  } as any)\n}\n\nexport function getModifyFn(nextVersion: boolean) {\n  return nextVersion ? modifyNext : modifyV0\n}\n","import { addDays } from 'date-fns'\n\n/**\n * Adds the specified number of days to the given date.\n * @param a - The date to subtract days from in \"YYYY-MM-DD\" format.\n * @param b - The number of days to add.\n * @returns The new date.\n */\nexport function dateAddDays(a: string, b: number): Date {\n  return addDays(new Date(a), b)\n}\n","import { differenceInMonths } from 'date-fns'\n\n/**\n * Returns the difference in months between two dates in \"YYYY-MM-DD\" format.\n * @param a - The first date in \"YYYY-MM-DD\" format.\n * @param b - The second date in \"YYYY-MM-DD\" format.\n * @returns The difference in months between the two dates.\n */\nexport function dateDifferenceInMonths(a: string, b: string): number {\n  return differenceInMonths(new Date(a), new Date(b))\n};\n","import { dateAddDays } from './dateAddDays'\nimport { dateDifferenceInMonths } from './dateDifferenceInMonths'\n\nexport const operators = {\n  date_add_days: dateAddDays,\n  date_difference_in_months: dateDifferenceInMonths,\n}\n"],"mappings":"AAAA,OACE,sBAAsBA,EAEtB,UAAUC,MACL,8BACP,OACE,sBAAsBC,EACtB,UAAUC,MACL,4CCRP,OAAS,WAAAC,MAAe,WAQjB,SAASC,EAAYC,EAAWC,EAAiB,CACtD,OAAOH,EAAQ,IAAI,KAAKE,CAAC,EAAGC,CAAC,CAC/B,CCVA,OAAS,sBAAAC,MAA0B,WAQ5B,SAASC,EAAuBC,EAAWC,EAAmB,CACnE,OAAOH,EAAmB,IAAI,KAAKE,CAAC,EAAG,IAAI,KAAKC,CAAC,CAAC,CACpD,CCPO,IAAMC,EAAY,CACvB,cAAeC,EACf,0BAA2BC,CAC7B,EHcO,SAASC,EAAmBC,EAAwBC,EAAyB,CAAC,EAAG,CACtF,GAAM,CAAE,YAAaC,EAAoB,GAAO,cAAAC,EAAe,gBAAAC,CAAgB,EAAIH,EAMnF,OAJyBD,GAAY,SAAS,YAAY,GAAG,aAEpB,KAAOE,EAGvCG,EAAuBL,EAA8B,CAC1D,cAAAG,EACA,gBAAAC,EACA,cAAe,CAAE,qBAAsB,GAAM,qBAAsB,EAAK,EACxE,mBAAoBE,EACpB,GAAGL,CACL,CAAC,EAGIM,EAAqBP,EAAgC,CAC1D,cAAAG,EACA,gBAAAC,EACA,GAAGH,CACL,CAAQ,CACV,CAEO,SAASO,EAAYC,EAAsB,CAChD,OAAOA,EAAcC,EAAaC,CACpC","names":["createHeadlessFormNext","modifyNext","createHeadlessFormV0","modifyV0","addDays","dateAddDays","a","b","differenceInMonths","dateDifferenceInMonths","a","b","operators","dateAddDays","dateDifferenceInMonths","createHeadlessForm","formSchema","jsfOptions","configNextVersion","initialValues","strictInputType","createHeadlessFormNext","operators","createHeadlessFormV0","getModifyFn","nextVersion","modifyNext","modifyV0"]}